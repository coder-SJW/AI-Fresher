---
name: sjw-development-workflow
description: 本技能是一个智能的开发工作流编排器，协调需求分析、功能设计、编码实现三个子 skills，提供从用户需求到可运行代码的完整开发流程支持。支持全自动、分步执行、混合模式三种执行模式，提供项目进度跟踪、质量门禁检查、文档管理和基于执行结果的自我进化能力。当用户说"开始开发流程"、"从需求到代码"、"完整开发流程"或需要端到端的开发支持时使用此技能。
---

# SJW 开发工作流编排器

## 概述

本技能是一个智能的开发工作流编排器，协调三个子 skills（sjw-requirement-analysis、sjw-feature-design、sjw-feature-code）完成从用户需求到可运行代码的完整开发流程。本技能提供灵活的执行模式、全面的项目管理、严格的质量控制和自我进化能力，确保开发过程高效、高质量、可持续改进。

## 核心能力

1. **工作流编排** - 协调三个子 skills 的执行顺序和数据流转
2. **灵活执行模式** - 支持全自动、分步执行、混合模式
3. **项目进度跟踪** - 实时跟踪项目进度和任务完成情况
4. **质量门禁检查** - 每个阶段完成后进行质量验证
5. **文档管理** - 统一管理所有输出文档和代码
6. **迭代优化建议** - 基于执行结果提供改进建议
7. **自我进化** - 根据执行结果质量反向优化子 skills

## 工作流程架构

```
用户需求
    ↓
┌─────────────────────────────────────────┐
│   sjw-development-workflow (编排器)       │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 执行模式选择                      │  │
│  │ ○ 全自动模式                     │  │
│  │ ○ 分步执行模式                   │  │
│  │ ○ 混合模式                       │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 质量门禁检查                      │  │
│  │ ○ 需求分析质量检查                │  │
│  │ ○ 功能设计质量检查                │  │
│  │ ○ 编码实现质量检查                │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 项目进度跟踪                      │  │
│  │ ○ 任务完成度                      │  │
│  │ ○ 质量评分                        │  │
│  │ ○ 风险和问题                      │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 文档管理                          │  │
│  │ ○ 文档清单                        │  │
│  │ ○ 版本管理                        │  │
│  │ ○ 文档关联                        │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 迭代优化                          │  │
│  │ ○ 执行结果分析                    │  │
│  │ ○ 改进建议生成                    │  │
│  │ ○ 子 skill 优化                   │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
    ↓                    ↓                  ↓
需求分析 ←--------→ 功能设计 ←----------→ 编码实现
    ↓                    ↓                  ↓
需求文档           设计文档            可运行代码
```

## 执行模式

### 模式 1：全自动模式

**适用场景：**
- 需求明确完整
- 用户有经验，了解整个流程
- 时间紧迫，需要快速完成

**执行流程：**
1. 接收用户需求
2. 依次调用三个子 skills
3. 每个步骤完成后自动进入下一步
4. 遇到质量问题时暂停并通知用户
5. 用户解决后自动继续
6. 完成后生成完整的项目报告

**触发方式：**
```
用户：开始完整开发流程，全自动模式：[需求描述]
AI：
1. 启动全自动模式
2. 调用 sjw-requirement-analysis → 生成需求文档
3. 质量检查通过 → 继续
4. 调用 sjw-feature-design → 生成设计文档
5. 质量检查通过 → 继续
6. 调用 sjw-feature-code → 生成代码
7. 质量检查通过 → 完成
8. 输出项目报告
```

**优点：**
- 快速高效
- 人工干预少
- 适合重复性任务

**注意事项：**
- 需要需求非常明确
- 质量问题会导致流程暂停
- 用户需要及时响应问题

---

### 模式 2：分步执行模式

**适用场景：**
- 需求复杂，需要逐步澄清
- 用户希望深度参与每个阶段
- 需要与团队协作完成

**执行流程：**
1. 接收用户需求
2. 执行第一步（需求分析）
3. 展示结果，等待用户确认
4. 用户可以要求调整或重新执行
5. 用户确认后进入下一步
6. 重复步骤 2-5 直到完成

**触发方式：**
```
用户：开始分步开发流程
AI：好的，我们开始分步模式。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 第 1 步：需求分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
请描述你的需求...

[执行需求分析，生成文档]

✅ 需求分析完成！
📄 需求文档已生成

质量评分：4.5 / 5.0
检查清单：
- [✓] 业务目标明确
- [✓] 功能需求拆解完整
- [✓] 非功能性需求已识别
- [✓] 技术考虑合理

请确认：
1. 继续下一步（功能设计）
2. 调整需求文档
3. 重新执行需求分析

用户：继续下一步
AI：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 第 2 步：功能设计
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
基于需求文档进行功能设计...

[执行功能设计，生成文档]

✅ 功能设计完成！
...
```

**优点：**
- 用户深度参与
- 每步都可以调整
- 适合复杂项目

**注意事项：**
- 执行时间较长
- 需要用户持续关注
- 需要用户有决策能力

---

### 模式 3：混合模式

**适用场景：**
- 部分步骤需求明确，部分需要用户确认
- 平衡效率和灵活性
- 最常用的执行模式

**执行流程：**
1. 接收用户需求
2. 对于明确的步骤自动执行
3. 对于关键步骤等待用户确认
4. 根据实际情况灵活调整
5. 完成后生成项目报告

**触发方式：**
```
用户：开始开发流程，混合模式
AI：好的，我将在混合模式下执行。

📊 执行计划：
1. 需求分析 → 自动执行
2. 功能设计 → 需要确认（关键步骤）
3. 编码实现 → 自动执行

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 第 1 步：需求分析（自动执行）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[自动执行需求分析]
✅ 完成，自动进入下一步

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 第 2 步：功能设计（需要确认）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[执行功能设计]

🎯 设计方案已生成，请查看：
- 功能模块划分
- 数据模型设计
- API 接口定义

请确认：
1. 确认方案，继续编码
2. 调整设计方案
3. 跳过此步骤

用户：确认方案，继续
AI：✅ 已确认，自动进入编码实现...
```

**优点：**
- 平衡效率和灵活性
- 关键步骤有人工把关
- 适合大多数场景

**注意事项：**
- 需要明确哪些步骤需要确认
- 需要定义确认标准

---

## 工作流程详解

### 阶段 1：流程初始化

1. **需求收集**
   - 获取用户需求描述
   - 了解项目背景和约束
   - 识别关键利益相关者

2. **模式选择**
   - 根据需求清晰度推荐执行模式
   - 确认用户选择的模式
   - 设置执行参数

3. **项目初始化**
   - 创建项目进度跟踪文档
   - 设置质量门禁标准
   - 初始化文档管理系统

---

### 阶段 2：需求分析阶段

**调用子 skill：** `sjw-requirement-analysis`

**执行前检查：**
- [ ] 需求描述是否完整
- [ ] 是否需要额外的上下文信息
- [ ] 是否需要访问现有代码库

**执行过程：**
1. 触发需求分析 skill
2. 监控执行进度
3. 收集生成的文档
4. 记录执行时间和质量指标

**质量门禁检查：**
```markdown
## 需求分析质量检查清单

- [ ] 业务目标清晰明确
- [ ] 功能需求拆解完整
- [ ] 非功能性需求已识别
- [ ] 技术考虑合理可行
- [ ] 风险已识别并有缓解策略
- [ ] 文档结构完整、格式规范

**质量评分：** ___ / 5.0

**检查结果：**
- ✅ 通过 - 进入下一阶段
- ⚠️  有问题 - 需要调整后继续
- ❌ 不通过 - 重新执行需求分析
```

**执行后处理：**
- 更新项目进度跟踪文档
- 记录质量评分和问题
- 生成需求分析报告
- 将文档加入文档管理系统

---

### 阶段 3：功能设计阶段

**调用子 skill：** `sjw-feature-design`

**执行前检查：**
- [ ] 需求分析文档是否通过质量检查
- [ ] 是否有项目技术栈信息
- [ ] 是否需要分析现有代码

**执行过程：**
1. 传递需求分析文档给设计 skill
2. 监控执行进度
3. 收集生成的文档
4. 记录执行时间和质量指标

**质量门禁检查：**
```markdown
## 功能设计质量检查清单

- [ ] 模块划分清晰合理
- [ ] 数据模型设计完整（ERD、表结构）
- [ ] API 接口定义完整（RESTful 规范）
- [ ] 业务流程设计合理（流程图、状态机）
- [ ] 性能和安全考虑周全
- [ ] 技术实现方案可行
- [ ] 文档结构完整、格式规范

**质量评分：** ___ / 5.0

**检查结果：**
- ✅ 通过 - 进入下一阶段
- ⚠️  有问题 - 需要调整后继续
- ❌ 不通过 - 重新执行功能设计
```

**执行后处理：**
- 更新项目进度跟踪文档
- 记录质量评分和问题
- 生成功能设计报告
- 将文档加入文档管理系统

---

### 阶段 4：编码实现阶段

**调用子 skill：** `sjw-feature-code`

**执行前检查：**
- [ ] 功能设计文档是否通过质量检查
- [ ] 是否有现有项目代码
- [ ] 是否需要遵循特定的代码规范

**执行过程：**
1. 传递功能设计文档给编码 skill
2. 监控执行进度
3. 收集生成的代码和文档
4. 记录执行时间和质量指标

**质量门禁检查：**
```markdown
## 编码实现质量检查清单

- [ ] 代码遵循 Spring Boot 最佳实践
- [ ] 代码结构清晰（分层合理）
- [ ] 测试覆盖率达标（> 80%）
- [ ] 异常处理完整
- [ ] 事务管理正确
- [ ] 代码注释和文档完整
- [ ] 数据库迁移脚本可用
- [ ] 影响范围分析完整

**质量评分：** ___ / 5.0

**检查结果：**
- ✅ 通过 - 进入下一阶段
- ⚠️  有问题 - 需要调整后继续
- ❌ 不通过 - 重新执行编码
```

**执行后处理：**
- 更新项目进度跟踪文档
- 记录质量评分和问题
- 生成编码实现报告
- 将代码和文档加入版本管理

---

### 阶段 5：项目总结和优化

**项目总结报告：**
```markdown
# 项目开发总结报告

## 项目概况
- **项目名称：** [项目名称]
- **开发周期：** [开始时间] - [结束时间]
- **执行模式：** [全自动/分步/混合]

## 各阶段执行情况

### 需求分析阶段
- **执行时间：** [时长]
- **质量评分：** [评分] / 5.0
- **输出文档：** [文档列表]
- **问题和改进：** [问题列表]

### 功能设计阶段
- **执行时间：** [时长]
- **质量评分：** [评分] / 5.0
- **输出文档：** [文档列表]
- **问题和改进：** [问题列表]

### 编码实现阶段
- **执行时间：** [时长]
- **质量评分：** [评分] / 5.0
- **输出内容：** [代码文件、测试、脚本等]
- **问题和改进：** [问题列表]

## 整体质量评估
- **总体评分：** [评分] / 5.0
- **主要成就：** [成就列表]
- **待改进项：** [改进列表]

## 下一步行动
1. [行动项 1]
2. [行动项 2]
3. [行动项 3]
```

---

## 项目进度跟踪

### 进度文档结构

在项目启动时创建进度跟踪文档：

```markdown
# [项目名称] 开发进度跟踪

**创建时间：** [时间戳]
**执行模式：** [模式]
**当前阶段：** [阶段]

## 进度概览
| 阶段 | 状态 | 完成度 | 开始时间 | 完成时间 | 质量评分 |
|------|------|--------|----------|----------|----------|
| 需求分析 | 🔄 进行中 | 50% | [时间] | - | - |
| 功能设计 | ⬜ 未开始 | 0% | - | - | - |
| 编码实现 | ⬜ 未开始 | 0% | - | - | - |

## 详细进度
[每个阶段的详细进度]

## 质量门禁记录
[每个阶段的质量检查记录]

## 风险和问题
[遇到的风险和问题]

## 文档清单
[所有输出文档列表]
```

### 实时更新机制

在执行过程中实时更新进度：
- 每个阶段开始时更新状态
- 完成时记录时间和质量评分
- 遇到问题时记录问题和解决方案
- 生成报告时更新整体进度

---

## 质量门禁系统

### 质量标准定义

为每个阶段定义明确的质量标准：

**需求分析质量标准：**
- 业务目标清晰度：⭐⭐⭐⭐⭐
- 功能需求完整性：⭐⭐⭐⭐⭐
- 非功能需求识别：⭐⭐⭐⭐
- 技术可行性：⭐⭐⭐⭐

**功能设计质量标准：**
- 模块划分合理性：⭐⭐⭐⭐⭐
- 数据模型完整性：⭐⭐⭐⭐⭐
- API 设计规范性：⭐⭐⭐⭐⭐
- 流程设计合理性：⭐⭐⭐⭐

**编码实现质量标准：**
- 代码规范遵循度：⭐⭐⭐⭐⭐
- 测试覆盖率：⭐⭐⭐⭐⭐
- 异常处理完整性：⭐⭐⭐⭐
- 文档完整性：⭐⭐⭐⭐

### 质量检查流程

1. **自动检查**
   - 文档结构完整性
   - 必需字段检查
   - 格式规范检查

2. **人工审查**
   - 内容质量评估
   - 技术合理性判断
   - 可行性评估

3. **质量评分**
   - 根据标准打分
   - 记录评分依据
   - 生成质量报告

4. **改进反馈**
   - 不通过时提供改进建议
   - 指导如何提升质量
   - 记录改进措施

---

## 文档管理系统

### 文档分类

```
项目文档/
├── 01-需求分析阶段/
│   ├── 需求分析文档.md
│   ├── 用户故事列表.md
│   └── 验收标准.md
├── 02-功能设计阶段/
│   ├── 功能设计文档.md
│   ├── 数据模型设计.md
│   ├── API接口文档.md
│   └── 业务流程图.md
├── 03-编码实现阶段/
│   ├── 源代码/
│   ├── 数据库脚本/
│   ├── 测试用例/
│   └── 影响范围分析.md
└── 04-项目管理/
    ├── 项目进度跟踪.md
    ├── 质量检查报告.md
    └── 项目总结报告.md
```

### 文档版本管理

- 每次修改都记录版本号
- 保留历史版本
- 记录变更内容
- 关联相关文档

### 文档关联

记录文档之间的依赖关系：
- 功能设计文档依赖需求分析文档
- 编码实现依赖功能设计文档
- 测试用例依赖需求和设计文档

---

## 迭代优化和自我进化

### 执行结果分析

在每个项目完成后分析执行结果：

**分析维度：**
1. **执行效率**
   - 总执行时间
   - 各阶段执行时间
   - 等待时间和阻塞时间

2. **输出质量**
   - 各阶段质量评分
   - 质量问题统计
   - 返工次数

3. **用户满意度**
   - 用户反馈
   - 调整请求次数
   - 验收通过率

4. **问题统计**
   - 遇到的问题类型
   - 问题发生频率
   - 问题解决时间

### 改进建议生成

基于分析结果生成改进建议：

**针对子 skills 的改进：**
```markdown
## sjw-requirement-analysis 优化建议

### 发现的问题
1. 功能需求拆解不够细致
   - 发生频率：经常
   - 影响程度：中

### 具体改进建议
- 在拆解原则中增加"原子性原则"
- 提供更详细的拆解示例
- 增加拆解深度检查点

### SKILL.md 更新建议
在"步骤 3：功能需求拆解"部分增加：
```markdown
**原子性原则：**
- 每个功能需求应该是一个原子操作
- 避免复合需求
- 确保需求可以独立测试和部署
```
```

**针对工作流程的改进：**
```markdown
## 工作流程优化建议

### 发现的问题
1. 全自动模式下质量问题导致多次返工
   - 影响程度：高

### 改进建议
- 在全自动模式中增加"质量预检"步骤
- 在每个阶段完成后自动进行质量评分
- 质量评分低于阈值时自动暂停
- 等待用户确认后继续
```

### 自我进化机制

**优化循环：**
```
执行项目
    ↓
收集反馈和数据
    ↓
分析问题和模式
    ↓
生成优化建议
    ↓
更新子 skills SKILL.md
    ↓
验证优化效果
    ↓
进入下一个项目
```

**优化优先级：**
- 高优先级：严重影响质量或效率的问题
- 中优先级：经常发生的轻微问题
- 低优先级：偶发的小问题

**优化记录：**
记录所有优化措施和效果：
- 优化内容
- 优化时间
- 优化效果
- 后续验证结果

---

## 子 Skills 优化指南

### 如何收集反馈

在项目执行过程中收集以下反馈：

**1. 执行日志**
- 记录每个步骤的执行情况
- 记录遇到的问题和错误
- 记录用户调整请求

**2. 质量检查结果**
- 每个阶段的质量评分
- 质量问题的详细描述
- 返工的原因和次数

**3. 用户反馈**
- 用户对输出的评价
- 用户修改的内容
- 用户建议和意见

### 如何分析反馈

**1. 问题分类**
- SKILL.md 描述不清晰
- 工作流程不合理
- 输出格式不符合要求
- 质量标准不明确
- 缺少某些功能

**2. 频率分析**
- 统计各类问题的发生频率
- 识别高频问题
- 优先解决高频问题

**3. 影响分析**
- 评估问题对执行效率的影响
- 评估问题对输出质量的影响
- 评估问题对用户满意度的影响

### 如何生成优化建议

**1. SKILL.md 优化建议模板：**

```markdown
## [子 Skill 名称] 优化建议

### 问题描述
- **问题：** [具体描述]
- **发生频率：** [总是/经常/偶尔/很少]
- **影响程度：** [高/中/低]
- **影响范围：** [受影响的章节或功能]

### 建议改进

**当前内容：**
```markdown
[SKILL.md 中的当前内容]
```

**建议修改为：**
```markdown
[改进后的内容]
```

**改进理由：**
- [理由 1]
- [理由 2]

**预期效果：**
- [预期改进效果 1]
- [预期改进效果 2]

**优先级：** 高/中/低

### 实施计划
1. [ ] 更新 SKILL.md
2. [ ] 在新项目中验证
3. [ ] 收集反馈
4. [ ] 确认优化效果
```

**2. 工作流程优化建议模板：**

```markdown
## 工作流程优化建议

### 问题描述
- **问题：** [具体描述]
- **影响阶段：** [需求分析/功能设计/编码实现]
- **影响程度：** [高/中/低]

### 建议改进

**当前流程：**
1. [步骤 1]
2. [步骤 2]
3. [步骤 3]

**优化后流程：**
1. [改进后的步骤 1]
2. [改进后的步骤 2]
3. [改进后的步骤 3]

**改进理由：**
- [理由]

**预期效果：**
- 效率提升：[具体提升]
- 质量提升：[具体提升]

**优先级：** 高/中/低
```

### 如何应用优化

**1. 更新子 Skill SKILL.md**

使用 Edit 工具更新 SKILL.md：

```
编辑文件：/path/to/sjw-requirement-analysis/SKILL.md
替换内容：
旧内容 → 新内容
```

**2. 验证优化效果**

- 在新项目中应用优化后的 skill
- 收集执行结果和质量评分
- 对比优化前后的效果
- 确认优化是否达到预期

**3. 持续迭代**

- 保留优化记录
- 定期回顾优化效果
- 根据新反馈继续优化
- 形成 PDCA 循环

---

## 最佳实践

### 对于编排器

**1. 灵活适应**
- 根据项目特点调整执行模式
- 根据用户反馈调整流程
- 不拘泥于固定模式

**2. 透明沟通**
- 清晰展示当前进度
- 及时报告问题
- 提供明确的下一步建议

**3. 质量优先**
- 严格执行质量门禁
- 不盲目追求速度
- 主动发现质量问题

**4. 持续改进**
- 每个项目都收集反馈
- 定期分析执行数据
- 主动优化子 skills

### 对于用户

**1. 明确需求**
- 尽可能清晰地描述需求
- 提供足够的上下文信息
- 明确约束条件

**2. 及时反馈**
- 及时确认或调整输出
- 提供具体的修改建议
- 解释调整的原因

**3. 质量把关**
- 认真进行质量检查
- 不轻易降低质量标准
- 主动发现潜在问题

**4. 参与优化**
- 提供使用反馈
- 建议改进方向
- 帮助验证优化效果

---

## 质量检查清单（编排器自身）

在使用本编排器时，验证：

- [ ] 已向用户说明执行模式和流程
- [ ] 项目进度跟踪文档已创建
- [ ] 质量门禁标准已明确
- [ ] 每个阶段执行前已进行前检查
- [ ] 每个阶段执行后已进行质量检查
- [ ] 所有文档已加入文档管理系统
- [ ] 项目总结报告已生成
- [ ] 优化建议已记录
- [ ] 用户已确认项目完成
- [ ] 子 skill 优化建议已整理
